---
title: "Final Project - McDonalds"
author: "Andrew Tran"
date: "May 11, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

  McDonald's is the world's largest restaurant chain by revenue, serving over 69 million customers daily in over 100 countries. It is the stereotypical ideal that comes to mind when one thinks of fast food, known for its hamburgers, fries, soft drinks, and other menu items. In today's current culture, with an increased focus on having a healthy lifestyle, people often disdain McDonald's for its supposed unhealtiness, its food and drink loaded with fat, grease, and sugar. But does McDonald's really deserve such a bad reputation? 
  
  As a person who has eaten at the UMD Stamp McDonalds an untold number of times, I decided to create this tutorial on exploring the nutrition behind the menu items sold at McDonald's. 
  

## Part 1 - Data Loading and Cleaning 
  
  The very first thing we must do is to retrieve the data we wish to look at and analyze. In this case, we will be using a free dataset provided by Kaggle: 
  
https://www.kaggle.com/mcdonalds/nutrition-facts

  Once we've downloaded the dataset to our computer, let's load it up into R-Studio, along with a few basic libraries we will need. 
  
  Of course, if you want to look at the official information as provided by McDonald's, you are always free to visit their official nutritional information calculator for yourself:
  
  

```{r loading_data}
library(tidyverse)
library(ggplot2)
library(dplyr)


# Use the read_csv function to load the dataset into a variable we can use. 
menu <- read_csv("C:/Users/Andrew/Desktop/College/CMSC320/Final/menu.csv")
menu
```


  Now that our dataset has been loaded in R-Studio as a dataframe, we can see that it contains 260 different McDonald's menu items, each with 24 different attributes. At first glance, this dataset appears to be very well organized too, so we may not need to do much cleaning with it. Let's use colnames() to see every single attribute used in this dataframe, and find out what we can work with. 

```{r col_names}
colnames(menu)
```


  Looks pretty good so far. There is however, one problem. Several of these attributes are missing their respective units of measurement. "% Daily Values" are easy enough to understand, but what about things like Sodium or Total Fat? What exactly does it mean if an Egg McMuffin possesses a value of 3 for Sugars and a value of 17 for Protein? We can make things clearer than this. 
  
  Let's add the official unit of measurement to their respective units. We can do so by using the rename function along with a pipeline. 
  

  
```{r add_units}
# Note that since our attribute names possess spaces, we will need to use backtabs `` in order to access them.
# For example: `attribute name` 
menu <- menu %>%
  rename( `Total Fat (g)`=`Total Fat`, 
         `Saturated Fat (g)`=`Saturated Fat`, 
         `Trans Fat (g)`=`Trans Fat`,
         `Cholesterol (mg)`=`Cholesterol`,
         `Sodium (mg)`=`Sodium`,
         `Carbohydrates (g)`=`Carbohydrates`,
         `Dietary Fiber (g)`=`Dietary Fiber`,
         `Sugars (g)`=`Sugars`,
         `Protein (g)`=`Protein`)

colnames(menu)
```
  
  
## Part 2 - Exploratory Data Analysis (EDA)

  Now that we have our data, let try to do some analyzing, and see if we can find a few things out or two.
  
 Let's start with something simple. For most people, the most common criticisms of fast food are high fat content, sodium, calorie count, and sugar. Let's try finding out the average values for these attributes for all food categories offered by McDonald's. 
  
  To do so, we can use the summarize and group_by functions. 
  
```{r menu_select}
menu_averages <- menu %>%
  group_by(Category) %>%
  summarize(`Average Calories`=mean(Calories),
            `Average Sodium (mg)`=mean(`Sodium (mg)`),
            `Average Total Fat (g)` = mean(`Total Fat (g)`),
            `Average Sugars (g)` = mean(`Sugars (g)`)) 
           

menu_averages 
```

  We can go one step further than this. Let's try putting our newfound data onto plots, so we can more easily visualize our findings. To do so, we will be using the ggplot package. Plotting, or more formally "data visualization" is an extremely useful tool for any data scientist, allowing us to easily see trends or insights into dataset characteristics. 
  
  ggplot is an extremely versatile and useful package, designed to work well with the tidyverse set of packages. For more information and resources on this package, look here: 
  
  http://ggplot2.tidyverse.org/
  https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf
  
```{r plot_averages}
# plot mean calories 
menu_averages %>%
  ggplot(mapping=aes(x=Category, y=`Average Calories`)) +
    geom_bar(aes(fill=Category), stat="identity") + ggtitle("Average Amount of Calories vs. Menu Category") + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5)) 

# plot mean sodium 
menu_averages %>%
  ggplot(mapping=aes(x=Category, y=`Average Sodium (mg)`)) +
    geom_bar(aes(fill=Category), stat="identity") + ggtitle("Average Amount of Sodium (mg) vs. Menu Category") + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5)) 

# plot mean total fat  
menu_averages %>%
  ggplot(mapping=aes(x=Category, y=`Average Total Fat (g)`)) +
    geom_bar(aes(fill=Category), stat="identity") + ggtitle("Average Amount of Total Fat (g) vs. Menu Category") + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5)) 

# plot mean sugars
menu_averages %>%
  ggplot(mapping=aes(x=Category, y=`Average Sugars (g)`)) +
    geom_bar(aes(fill=Category), stat="identity") + ggtitle("Average Amount of Sugars (g) vs. Menu Category") + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5)) 
```
  

  This looks much nicer, and is easier to convey information to a viewer. But what exactly can we conclude? 
Clearly, we can see that the Breakfast, Chicken & Fish, and Beef & Pork are the top 3 highest categories for Average Amounts of Sodium and Total Fat, going above 900 mg and 24 grams, respectively. This isn't too unexpected. Surprisingly however, Smoothies & Shakes actually outclasses Beef & Pork when it comes to total Calories, going well over 500. The average amount of sugar for Smoothies & Shakes is also disturbingly high, averaging near 80 grams of sugar. That's equal to over 2 cans of Coca Cola. 





   